<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chatbot UI</title>
   <link rel="stylesheet" href="/static/style.css" />

</head>
<body>
  <input type="hidden" id="chat_id" value="{{ chat_id }}">
  <div class="sidebar" id="sidebar">
    <h3>Chats</h3>
    <button onclick="startNewChat()">â• New Chat</button>
    <div id="chat-list"></div>
  </div>
  <div class="main">
     <!-- testing -->
<div class="auth-bar">
  {% if current_user.is_authenticated %}
    <span class="auth-welcome">ğŸ‘‹ Welcome, <strong>{{ current_user.username }}</strong></span>
    <a class="auth-btn" href="{{ url_for('logout') }}">Logout</a>
  {% else %}
    <a class="auth-btn" href="{{ url_for('login') }}">Login</a>
    <a class="auth-btn" href="{{ url_for('register') }}">Register</a>
  {% endif %}
</div>
 <!-- testing -->

    <div class="top-controls">
      <button class="toggle-sidebar" onclick="toggleSidebar()">â˜°</button>
<div class="model-selector-wrapper" style="position: relative;">
<button class="model-button" onclick="toggleModelMenu()" id="selected-model-button">ğŸ§  LLaMA 4 Maverick</button>
  <div id="modelMenu" class="dropdown-menu" style="display: none; max-height: 300px; overflow-y: auto;">
      <div onclick="selectModel('openai/gpt-4.1')"
        onmouseenter="showModelInfo('Chatgpt 4.1', 'Smartest: Github')">
          Chatgpt 4.1 â€“ Smartest (Github)
    </div>

    <div onclick="selectModel('meta-llama/llama-4-maverick-17b-128e-instruct')"
         onmouseenter="showModelInfo('ğŸ¦™ LLaMA 4 Maverick', 'ğŸ§  Smart model, best for deep reasoning and long conversations. Source: Groq')">
         ğŸ¦™ LLaMA 4 Maverick â€“ Images + Reasoning (Groq)
    </div>

    <div onclick="selectModel('llama-3.3-70b-versatile')"
         onmouseenter="showModelInfo('ğŸ§  LLaMA 3.3 70B', 'ğŸ“ Highly detailed, great memory, great for assignments. Source: Groq')">
         ğŸ§  LLaMA 3.3 70B â€“ Assignments (Groq)
    </div>

    <div onclick="selectModel('qwen/qwen3-30b-a3b:free')"
         onmouseenter="showModelInfo('ğŸ“˜ Qwen 30B', 'ğŸ§  Deep logical reasoning, long context, clean responses. Source: OpenRouter')">
         ğŸ“˜ Qwen 30B â€“ Reasoning (OpenRouter)
    </div>

    <div onclick="selectModel('qwen/qwen2.5-vl-32b-instruct:free')"
         onmouseenter="showModelInfo('ğŸŒŸ Qwen 2.5 VL', 'ğŸ–¼ï¸ Strongest image model. Handles complex visuals + text. Source: OpenRouter')">
         ğŸŒŸ Qwen 2.5 VL 32B â€“ Images + Reasoning (OpenRouter) âœ…
    </div>

    <div onclick="selectModel('llama3-70b-8192')"
         onmouseenter="showModelInfo('^_~ LLaMA 3 70B', 'ğŸ¤ GPT-3.5 level performance, structured answers. Source: Groq')">
         ^_~ LLaMA 3 70B â€“ Balanced (Groq)
    </div>

    <div onclick="selectModel('llama3-8b-8192')"
         onmouseenter="showModelInfo('O_O LLaMA 3 8B', 'âš¡ Lightweight sibling of 70B, faster, less detailed. Source: Groq')">
         O_O LLaMA 3 8B â€“ Light Chat (Groq)
    </div>

    <div onclick="selectModel('deepseek-r1-distill-llama-70b')"
         onmouseenter="showModelInfo('ğŸ”¥ DeepSeek R1 Distill', 'âš¡ Fastest detailed LLaMA. Ideal for summaries, tasks. Source: Groq')">
         ğŸ”¥ DeepSeek R1 Distill â€“ Fast Reasoning (Groq)
    </div>

    <div onclick="selectModel('nvidia/llama-3.3-nemotron-super-49b-v1:free')"
         onmouseenter="showModelInfo('âš™ï¸ Nvidia Nemotron 49B', 'ğŸ§® Great for math, code, logic-heavy prompts. Also supports images. Source: OpenRouter')">
         âš™ï¸ Nvidia Nemotron 49B â€“ Code + Math + Images (OpenRouter) âœ…
    </div>

    <div onclick="selectModel('meta-llama/llama-4-scout-17b-16e-instruct')"
         onmouseenter="showModelInfo('ğŸ¦¾ LLaMA 4 Scout', 'ğŸ–¼ï¸ Image capable, very structured & balanced responses. Source: Groq')">
         ğŸ¦¾ LLaMA 4 Scout â€“ Image + Balanced (Groq) âœ…
    </div>

    <div onclick="selectModel('qwen/qwen3-32b')"
         onmouseenter="showModelInfo('ğŸŒ Qwen 32B', 'ğŸŒ Very multilingual, precise structured answers. Source: Groq')">
         ğŸŒ Qwen 32B â€“ Multilingual (Groq)
    </div>

    <div onclick="selectModel('deepseek/deepseek-r1-0528-qwen3-8b:free')"
         onmouseenter="showModelInfo('ğŸ§  DeepSeek R1 Qwen 8B', 'ğŸ” Fast + accurate generalist. Good memory. Source: OpenRouter')">
         ğŸ§  DeepSeek R1 Qwen 8B â€“ General Use (OpenRouter)
    </div>

    <div onclick="selectModel('gemma2-9b-it')"
         onmouseenter="showModelInfo('ğŸ”¬ Gemma 2 9B IT', 'ğŸ“˜ Instruction-tuned for clear explanations. Source: Groq')">
         ğŸ”¬ Gemma 2 9B IT â€“ Explanation Tasks (Groq)
    </div>

    <div onclick="selectModel('mistral-saba-24b')"
         onmouseenter="showModelInfo('âœ¨ Mistral SABA 24B', 'ğŸ’¬ Friendly, fast, good fallback. Casual chat model. Source: Groq')">
         âœ¨ Mistral SABA 24B â€“ Conversational (Groq)
    </div>

    <div onclick="selectModel('compound-beta')"
         onmouseenter="showModelInfo('ğŸ§ª Compound Beta', 'ğŸ¨ Experimental, creative prompts, fun answers. Source: Groq')">
         ğŸ§ª Compound Beta â€“ Creative (Groq)
    </div>

    <div onclick="selectModel('qwen/qwen3-8b:free')"
         onmouseenter="showModelInfo('ğŸŒ Qwen 8B', 'ğŸŒ Smallest multilingual Qwen. Surprisingly good. Source: OpenRouter')">
         ğŸŒ Qwen 8B â€“ Multilingual Light (OpenRouter)
    </div>

    <div onclick="selectModel('thudm/glm-4-32b:free')"
         onmouseenter="showModelInfo('ğŸ—£ï¸ GLM 4', 'ğŸ§ Great multilingual dialogue. Source: OpenRouter')">
         ğŸ—£ï¸ GLM 4 â€“ Multilingual Chat (OpenRouter)
    </div>

    <div onclick="selectModel('meta-llama/llama-prompt-guard-2-86m')"
         onmouseenter="showModelInfo('ğŸ›¡ï¸ Prompt Guard', 'âœï¸ Rewrites prompts, grammar correction. Niche use. Source: Groq')">
         ğŸ›¡ï¸ Prompt Guard â€“ Prompt Filtering (Groq)
    </div>

    <div onclick="selectModel('google/gemma-3-27b-it:free')"
         onmouseenter="showModelInfo('ğŸ“„ Gemma 3 27B IT', 'ğŸ“– Long-form answers, instruction tuned. Source: OpenRouter')">
         ğŸ“„ Gemma 3 27B IT â€“ Long Answers (OpenRouter)
    </div>
  </div>

  <!-- Hidden model input -->
  <input type="hidden" id="ai_model" value="meta-llama/llama-4-maverick-17b-128e-instruct">

  <!-- Description tooltip -->
  <div id="model-info-box" style="position:absolute; top:-110px; left:0; width:320px; background:#222; color:#ccc; padding:10px; border-radius:8px; display:none; border:1px solid #444;"></div>
</div>
    </div>
    <div id="flash"></div>
    <div class="chat-display" id="chat-box"></div>
    <div class="temp-bar">
      <div class="temp-selector">
  <button id="temp-button" onclick="toggleTempOptions()">ğŸ¯ Balanced â–¼</button>
  <ul id="temp-options" class="hidden">
    <li data-value="0.2">ğŸ§  Precise</li>
    <li data-value="0.5">ğŸ¯ Balanced</li>
    <li data-value="0.8">ğŸ’¡ Creative</li>
    <li data-value="1.0">ğŸ”¥ Wild</li>
  </ul>
  </div>
      </div>
    <div class="chat-input" id="chat-input" ondragover="handleDragOver(event)" ondrop="handleDrop(event)">

  <input type="hidden" id="temperature" value="0.5">

      <label class="preview-wrapper">
        ğŸ“
        <input type="file" id="images" style="display:none" multiple onchange="previewImages(this)">
        <div id="preview-container" style="display:flex; gap:10px;"></div>
      </label>

      <!-- Web Search Button -->
      <label class="web-search-toggle" title="Toggle Web Search">
  <input type="checkbox" id="webSearchToggle" onchange="toggleWebSearch()">
  <svg class="globe-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
       xmlns="http://www.w3.org/2000/svg">
    <circle cx="12" cy="12" r="10" stroke-width="2"/>
    <path d="M2 12h20M12 2a15.3 15.3 0 0 1 0 20M12 2a15.3 15.3 0 0 0 0 20" stroke-width="2"/>
  </svg>
</label>
<input type="hidden" id="web_search_enabled" value="false">



      <textarea id="question" placeholder="Type your question..." required oninput="autoResize(this)"></textarea>
      <button onclick="askQuestion()">â¤</button>
      <!-- <button id="copy-question-btn" class="copy-btn">ğŸ“‹</button> -->
    </div>
  </div>

  <!-- Scroll to Bottom Button -->
<button id="scrollToBottom" class="scroll-btn" aria-label="Scroll to bottom">
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="white" viewBox="0 0 24 24">
    <path d="M12 16.5l-6-6 1.41-1.42L12 13.67l4.59-4.59L18 10.5z"/>
  </svg>
</button>
<script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
